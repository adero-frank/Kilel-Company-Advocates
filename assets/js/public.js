window.addEventListener("load",function(){const t=document.getElementById("loadingProgress");if(t){let e=0;const o=setInterval(()=>{e+=2,t.style.width=`${e}%`,e>=100&&(clearInterval(o),setTimeout(()=>{const s=document.getElementById("loadingScreen");s&&(s.style.opacity="0",s.style.visibility="hidden",setTimeout(()=>{const n=document.getElementById("whatsappPopup");n&&(n.classList.add("show"),document.body.style.overflow="hidden")},500))},500))},30)}else setTimeout(()=>{const e=document.getElementById("whatsappPopup");e&&(e.classList.add("show"),document.body.style.overflow="hidden")},2e3)});typeof gsap<"u"&&(gsap.registerPlugin(ScrollTrigger),gsap.timeline().to(".hero-pre-title",{duration:1.2,opacity:1,y:0,ease:"power3.out"}).to(".hero-title",{duration:1.5,opacity:1,y:0,ease:"power3.out"},"-=0.8").to(".hero-subtitle",{duration:1.2,opacity:1,y:0,ease:"power3.out"},"-=0.6").to(".hero-cta",{duration:1.2,opacity:1,y:0,ease:"power3.out"},"-=0.4").to(".hero-scroll-indicator",{duration:1,opacity:1,ease:"power3.out"},"-=0.2"),gsap.to(".hero-title span:after",{scrollTrigger:{trigger:".hero-title",start:"top 80%",end:"bottom 20%",toggleActions:"play none none reverse"},duration:1.5,scaleX:1,ease:"power3.inOut",stagger:.3}),gsap.utils.toArray(".fade-in").forEach(e=>{gsap.fromTo(e,{opacity:0,y:50},{opacity:1,y:0,duration:1,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 85%",end:"bottom 20%",toggleActions:"play none none reverse"}})}),gsap.utils.toArray(".service-card").forEach((e,o)=>{gsap.fromTo(e,{opacity:0,y:60,rotationY:10},{opacity:1,y:0,rotationY:0,duration:1,delay:o*.1,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 85%",end:"bottom 20%",toggleActions:"play none none reverse"}})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(o){o.preventDefault();const s=this.getAttribute("href");if(s==="#")return;const n=document.querySelector(s);n&&gsap.to(window,{duration:1,scrollTo:{y:n,offsetY:80},ease:"power2.inOut"})})}));window.addEventListener("scroll",()=>{const t=document.querySelector(".navbar"),e=document.querySelector(".contact-info-bar");t&&(window.scrollY>100?(t.classList.add("scrolled"),e&&(e.style.opacity="0",e.style.transform="translateY(-100%)")):(t.classList.remove("scrolled"),e&&(e.style.opacity="1",e.style.transform="translateY(0)")))});const ee=document.querySelectorAll(".stat-number[data-target]");ee.forEach(t=>{const e=parseInt(t.getAttribute("data-target"));t.nextElementSibling?.textContent;let o=0;const s=e/50,c=2e3/50,d=()=>{o<e?(o+=s,t.textContent=Math.floor(o),setTimeout(d,c)):t.textContent=e},i=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&(d(),i.unobserve(l.target))})},{threshold:.5});i.observe(t)});const te=document.querySelectorAll(".hero-stat-number");te.forEach(t=>{const e=t.textContent,o=parseInt(e.replace(/[^0-9]/g,"")),s=e.replace(/[0-9]/g,"");let n=0;const r=o/50,c=()=>{n<o?(n+=r,t.textContent=Math.floor(n)+s,setTimeout(c,30)):t.textContent=o+s},d=new IntersectionObserver(i=>{i.forEach(a=>{a.isIntersecting&&(c(),d.unobserve(a.target))})},{threshold:.5});d.observe(t)});const H=document.getElementById("mobileMenuBtn"),x=document.querySelector(".nav-links");H&&x&&H.addEventListener("click",()=>{x.style.display=x.style.display==="flex"?"none":"flex"});document.querySelectorAll(".faq-question").forEach(t=>{t.addEventListener("click",()=>{const e=t.closest(".faq-item"),o=e?.classList.contains("active");if(t.nextElementSibling,document.querySelectorAll(".faq-item").forEach(s=>{if(s!==e){s.classList.remove("active");const n=s.querySelector(".faq-question");n&&n.setAttribute("aria-expanded","false")}}),e)o?(e.classList.remove("active"),t.setAttribute("aria-expanded","false")):(e.classList.add("active"),t.setAttribute("aria-expanded","true"));else{const s=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!s)}})});let f=0;const A=document.querySelectorAll(".testimonial-card"),k=A.length,O=document.getElementById("prevTestimonial"),Y=document.getElementById("nextTestimonial"),j=document.querySelectorAll(".testimonials-dots .dot");function q(t){A.forEach((e,o)=>{e.classList.remove("active"),o===t&&setTimeout(()=>{e.classList.add("active")},50)}),j.forEach((e,o)=>{e.classList.toggle("active",o===t)})}function Q(){f=(f+1)%k,q(f)}function oe(){f=(f-1+k)%k,q(f)}O&&Y&&(O.addEventListener("click",oe),Y.addEventListener("click",Q));j.forEach((t,e)=>{t.addEventListener("click",()=>{f=e,q(f)})});A.length>0&&setInterval(Q,5e3);const E=document.getElementById("scrollToTop");E&&(window.addEventListener("scroll",()=>{window.scrollY>300?E.classList.add("show"):E.classList.remove("show")}),E.addEventListener("click",()=>{typeof gsap<"u"&&gsap.to?gsap.to(window,{duration:1,scrollTo:{y:0},ease:"power2.inOut"}):window.scrollTo({top:0,behavior:"smooth"})}));const $=document.getElementById("whatsappPopupBtn"),b=document.getElementById("whatsappPopup"),F=document.getElementById("whatsappPopupClose"),G=document.getElementById("whatsappPopupOverlay");function se(){b&&(b.classList.add("show"),document.body.style.overflow="hidden")}function C(){b&&(b.classList.remove("show"),document.body.style.overflow="")}$&&$.addEventListener("click",t=>{t.preventDefault(),se()});F&&F.addEventListener("click",C);G&&G.addEventListener("click",C);document.addEventListener("keydown",t=>{t.key==="Escape"&&b&&b.classList.contains("show")&&C()});function M(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function ne(t){return/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(t)||t===""}function L(t,e){const o=t.closest(".form-group"),s=o.querySelector(".form-error");o.classList.add("error"),o.classList.remove("success"),s.textContent=e}function re(t){const e=t.closest(".form-group");e.classList.remove("error"),e.classList.add("success");const o=e.querySelector(".form-error");o.textContent=""}function h(t){const e=t.value.trim();return t.hasAttribute("required")&&!e?(L(t,"This field is required"),!1):t.type==="email"&&e&&!M(e)?(L(t,"Please enter a valid email address"),!1):t.type==="tel"&&e&&!ne(e)?(L(t,"Please enter a valid phone number"),!1):t.tagName==="TEXTAREA"&&e.length<10?(L(t,"Message must be at least 10 characters"),!1):(re(t),!0)}const y=document.getElementById("contactForm");if(y){const t=y.querySelectorAll('input:not([type="checkbox"]), textarea, select'),e=y.querySelector('input[type="checkbox"][name="privacy"]'),o=e?.closest(".form-group");t.forEach(s=>{s.addEventListener("blur",()=>h(s)),s.addEventListener("input",()=>{s.closest(".form-group").classList.contains("error")&&h(s)})}),e&&e.addEventListener("change",()=>{if(e.checked){o?.classList.remove("error"),o?.classList.add("success");const s=o?.querySelector(".form-error");s&&(s.textContent="")}else o?.classList.remove("success")}),y.addEventListener("submit",s=>{s.preventDefault();let n=!0;if(t.forEach(r=>{h(r)||(n=!1)}),e&&!e.checked){n=!1,o?.classList.add("error");const r=o?.querySelector(".form-error");r&&(r.textContent="You must agree to the Privacy Policy to continue.")}else e&&o?.classList.remove("error");if(n){const r=y.querySelector(".btn-submit"),c=document.getElementById("formSuccessMessage");r.disabled=!0,r.innerHTML='<span>Sending...</span><i class="fas fa-spinner fa-spin"></i>',setTimeout(()=>{r.disabled=!1,r.innerHTML='<span>Send Message</span><i class="fas fa-paper-plane"></i>',c&&c.classList.add("show"),y.reset(),t.forEach(d=>{d.closest(".form-group")?.classList.remove("success")}),o?.classList.remove("success"),c&&setTimeout(()=>{c.classList.remove("show")},5e3)},1500)}})}const v=document.getElementById("newsletterForm");if(v){const t=v.querySelector("#newsletter-email");t.addEventListener("blur",()=>h(t)),t.addEventListener("input",()=>{t.closest(".form-group").classList.contains("error")&&h(t)}),v.addEventListener("submit",e=>{if(e.preventDefault(),h(t)){const o=v.querySelector(".btn-submit"),s=document.getElementById("newsletterSuccessMessage");o.disabled=!0,o.innerHTML='<span>Subscribing...</span><i class="fas fa-spinner fa-spin"></i>',setTimeout(()=>{o.disabled=!1,o.innerHTML='<span>Subscribe to Newsletter</span><i class="fas fa-envelope"></i>',s.classList.add("show"),v.reset(),t.closest(".form-group")?.classList.remove("success"),setTimeout(()=>{s.classList.remove("show")},5e3)},1500)}})}let p=0;const P=document.querySelectorAll("#aboutTestimonialsCarousel .testimonial-card"),w=P.length,R=document.getElementById("prevAboutTestimonial"),U=document.getElementById("nextAboutTestimonial"),z=document.getElementById("aboutTestimonialsCarousel"),V=z?z.closest(".testimonials-container")?.querySelectorAll(".testimonials-dots .dot")||[]:[];function D(t){P.forEach((e,o)=>{e.classList.remove("active"),o===t&&setTimeout(()=>{e.classList.add("active")},50)}),V.forEach((e,o)=>{e.classList.toggle("active",o===t)})}function J(){w>0&&(p=(p+1)%w,D(p))}function ie(){w>0&&(p=(p-1+w)%w,D(p))}R&&U&&(R.addEventListener("click",ie),U.addEventListener("click",J));V.forEach((t,e)=>{t.addEventListener("click",()=>{p=e,D(p)})});P.length>0&&setInterval(J,5e3);const ae=document.querySelectorAll(".stat-showcase-number[data-target]");ae.forEach(t=>{const e=parseInt(t.getAttribute("data-target"));t.nextElementSibling?.textContent;let o=0;const s=e/50,c=2e3/50,d=()=>{o<e?(o+=s,t.textContent=Math.floor(o),setTimeout(d,c)):t.textContent=e},i=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&(d(),i.unobserve(l.target))})},{threshold:.5});i.observe(t)});const g=document.getElementById("blogSearchInput"),_=document.getElementById("blogSearchBtn"),W=document.querySelectorAll(".blog-category-btn"),K=document.querySelectorAll(".blog-card");function B(t){const e=t.toLowerCase().trim();K.forEach(s=>{const n=s.querySelector(".blog-card-title a")?.textContent.toLowerCase()||"",r=s.querySelector(".blog-card-excerpt")?.textContent.toLowerCase()||"",c=s.querySelector(".blog-category-tag")?.textContent.toLowerCase()||"";n.includes(e)||r.includes(e)||c.includes(e)?s.style.display="flex":s.style.display="none"});const o=document.querySelector(".blog-featured");if(o){const s=o.querySelector(".blog-featured-title a")?.textContent.toLowerCase()||"",n=o.querySelector(".blog-featured-excerpt")?.textContent.toLowerCase()||"";s.includes(e)||n.includes(e)?o.style.display="grid":o.style.display="none"}}function Z(t){K.forEach(o=>{const s=o.getAttribute("data-category");t==="all"||s===t?o.style.display="flex":o.style.display="none"});const e=document.querySelector(".blog-featured");e&&!g?.value.trim()&&(e.style.display="grid")}g&&(g.addEventListener("input",t=>{const e=t.target.value;if(e.trim())B(e);else{const o=document.querySelector(".blog-category-btn.active")?.getAttribute("data-category")||"all";Z(o)}}),g.addEventListener("keypress",t=>{t.key==="Enter"&&(t.preventDefault(),B(t.target.value))}));_&&_.addEventListener("click",()=>{g&&B(g.value)});W.forEach(t=>{t.addEventListener("click",()=>{W.forEach(o=>o.classList.remove("active")),t.classList.add("active");const e=t.getAttribute("data-category");Z(e),g&&(g.value="")})});const T=document.getElementById("blogsNewsletterForm");T&&T.addEventListener("submit",t=>{t.preventDefault();const e=T.querySelector(".newsletter-input"),o=T.querySelector(".newsletter-submit-btn");e&&M(e.value)?(o.disabled=!0,o.innerHTML='<span>Subscribing...</span><i class="fas fa-spinner fa-spin"></i>',setTimeout(()=>{o.disabled=!1,o.innerHTML='<span>Subscribe</span><i class="fas fa-arrow-right"></i>',e.value="",alert("Thank you for subscribing! You will receive our latest legal insights via email.")},1500)):(e?.focus(),alert("Please enter a valid email address."))});const X=document.getElementById("readingProgressBar");X&&window.addEventListener("scroll",()=>{const t=window.innerHeight,e=document.documentElement.scrollHeight,s=(window.pageYOffset||document.documentElement.scrollTop)/(e-t)*100;X.style.width=s+"%"});const m=document.querySelector(".copy-link-btn");m&&m.addEventListener("click",t=>{t.preventDefault();const e=m.getAttribute("data-url");navigator.clipboard.writeText(e).then(()=>{const o=m.innerHTML;m.innerHTML='<i class="fas fa-check"></i>',m.style.background="var(--success)",setTimeout(()=>{m.innerHTML=o,m.style.background=""},2e3)})});const ce=document.querySelectorAll(".share-btn[data-platform]");ce.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const o=t.getAttribute("data-platform"),s=encodeURIComponent(window.location.href),n=encodeURIComponent(document.title);let r="";switch(o){case"facebook":r=`https://www.facebook.com/sharer/sharer.php?u=${s}`;break;case"twitter":r=`https://twitter.com/intent/tweet?url=${s}&text=${n}`;break;case"linkedin":r=`https://www.linkedin.com/sharing/share-offsite/?url=${s}`;break;case"email":r=`mailto:?subject=${n}&body=${s}`;break}r&&window.open(r,"_blank","width=600,height=400")})});const le=document.querySelectorAll(".toc-link");le.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const o=t.getAttribute("href"),s=document.querySelector(o);if(s){const n=s.offsetTop-100;window.scrollTo({top:n,behavior:"smooth"})}})});const S=document.getElementById("articleNewsletterForm");S&&S.addEventListener("submit",t=>{t.preventDefault();const e=S.querySelector(".newsletter-email-input"),o=S.querySelector(".newsletter-submit-btn");e&&M(e.value)?(o.disabled=!0,o.innerHTML='<span>Subscribing...</span><i class="fas fa-spinner fa-spin"></i>',setTimeout(()=>{o.disabled=!1,o.innerHTML='<span>Subscribe</span><i class="fas fa-arrow-right"></i>',e.value="",alert("Thank you for subscribing! You will receive our latest legal insights via email.")},1500)):(e?.focus(),alert("Please enter a valid email address."))});(function(){let t=!1;const e="exit_intent_shown";if(sessionStorage.getItem(e))return;function o(){const i=window.location.pathname;if(document.title.toLowerCase(),i.includes("/practice-areas/")){const a=i.split("/").pop().replace(/-/g," ");return{title:`Get Free Assessment for ${a.charAt(0).toUpperCase()+a.slice(1)}`,description:"Answer 5 quick questions and get matched with the right attorney.",ctaText:"Start Assessment",ctaLink:"/case-evaluation?area="+a}}else return i.includes("/blogs/")?{title:`Download: Complete Guide to ${document.querySelector("h1")?.textContent||"Legal Guide"}`,description:"Get our comprehensive legal guide delivered to your inbox.",ctaText:"Download Guide",ctaLink:"/resources"}:i.includes("/contact")?{title:"Limited Slots Available - Book Now",description:"Schedule your free consultation today. Only 3 slots remaining this week.",ctaText:"Book Appointment",ctaLink:"/book-appointment"}:i.includes("/about")?{title:"Ready to Get Started?",description:"Book your free 30-minute consultation with our expert attorneys.",ctaText:"Book Consultation",ctaLink:"/book-appointment"}:{title:"Free 30-Minute Consultation",description:"Book your free consultation with our expert legal team today.",ctaText:"Book Now",ctaLink:"/book-appointment"}}document.addEventListener("mouseout",function(i){!i.toElement&&!i.relatedTarget&&i.clientY<10&&(t||s())}),window.addEventListener("beforeunload",function(){t||s()});function s(){t=!0,sessionStorage.setItem(e,"true");const i=o(),a=document.getElementById("exitIntentPopup"),l=document.getElementById("exitIntentOverlay");if(a&&l){const u=a.querySelector(".exit-intent-title"),N=a.querySelector(".exit-intent-description"),I=a.querySelector(".exit-intent-cta");u&&(u.textContent=i.title),N&&(N.textContent=i.description),I&&(I.textContent=i.ctaText,I.href=i.ctaLink),l.classList.add("show"),a.classList.add("show"),document.body.style.overflow="hidden"}}const n=document.getElementById("exitIntentClose"),r=document.getElementById("exitIntentOverlay"),c=document.getElementById("exitIntentDismiss");n&&n.addEventListener("click",d),r&&r.addEventListener("click",d),c&&c.addEventListener("click",d);function d(){const i=document.getElementById("exitIntentPopup"),a=document.getElementById("exitIntentOverlay");i&&a&&(a.classList.remove("show"),i.classList.remove("show"),document.body.style.overflow="")}})();(function(){if("loading"in HTMLImageElement.prototype)document.querySelectorAll("img:not([loading])").forEach((e,o)=>{o>2&&!e.closest(".hero")&&!e.closest(".loading-screen")&&(e.loading="lazy")});else{const t=new IntersectionObserver((o,s)=>{o.forEach(n=>{if(n.isIntersecting){const r=n.target;r.dataset.src&&(r.src=r.dataset.src,r.removeAttribute("data-src"),r.classList.add("loaded")),s.unobserve(r)}})},{rootMargin:"50px"});document.querySelectorAll("img[data-src]").forEach(o=>{t.observe(o)})}})();(function(){const t=document.getElementById("themeToggle"),e=document.getElementById("themeToggleMobile"),o=document.getElementById("themeIcon"),s=document.getElementById("themeIconMobile"),n=document.documentElement,r=()=>localStorage.getItem("theme")||"dark",c=l=>{n.setAttribute("data-theme",l),localStorage.setItem("theme",l),d(l)},d=l=>{if(l==="light"){if(o&&(o.className="fas fa-sun"),s){s.className="fas fa-sun me-2";const u=e?.querySelector("span");u&&(u.textContent="Light Mode")}}else if(o&&(o.className="fas fa-moon"),s){s.className="fas fa-moon me-2";const u=e?.querySelector("span");u&&(u.textContent="Dark Mode")}},i=()=>{const u=(n.getAttribute("data-theme")||r())==="dark"?"light":"dark";c(u)},a=()=>{const l=r();c(l)};t&&t.addEventListener("click",i),e&&e.addEventListener("click",i),a()})();
